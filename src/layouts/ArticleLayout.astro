---
import type { CollectionEntry } from 'astro:content';
import Layout from './Layout.astro';
import Container from '../components/Container.astro';
import { formatDate } from '../lib/formatDate';

interface Props {
  article: CollectionEntry<'articles'>;
  previousArticle?: CollectionEntry<'articles'>;
  nextArticle?: CollectionEntry<'articles'>;
}

const { article, previousArticle, nextArticle } = Astro.props;
const { title, description, date, author = 'John Doe' } = article.data;
---

<Layout 
  title={title}
  description={description}
>
  <article class="py-16 lg:py-20">
    <Container>
      <header class="flex flex-col mb-8">
        <h1 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-4xl">
          {title}
        </h1>
        <time
          datetime={date.toISOString()}
          class="flex items-center text-sm text-gray-500 dark:text-gray-400 mt-2"
        >
          <span class="h-4 w-4 mr-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
            </svg>
          </span>
          {formatDate(date)}
        </time>
        {author && (
          <div class="text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center">
            <span class="h-4 w-4 mr-1">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
              </svg>
            </span>
            {author}
          </div>
        )}
      </header>

      <div class="prose prose-lg dark:prose-invert prose-a:text-blue-600 dark:prose-a:text-blue-400 hover:prose-a:text-blue-500 dark:hover:prose-a:text-blue-300 prose-img:rounded-lg prose-headings:font-semibold prose-pre:bg-gray-800 prose-pre:text-gray-100 max-w-none">
        <slot />
      </div>

      {(previousArticle || nextArticle) && (
        <nav class="mt-16 pt-8 border-t border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row justify-between gap-4">
          {previousArticle && (
            <div class="flex-1">
              <a href={`/articles/${previousArticle.slug}`} class="group flex flex-col">
                <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Previous Article</span>
                <span class="text-lg font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400">
                  {previousArticle.data.title}
                </span>
              </a>
            </div>
          )}
          
          {nextArticle && (
            <div class="flex-1 text-right">
              <a href={`/articles/${nextArticle.slug}`} class="group flex flex-col">
                <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Next Article</span>
                <span class="text-lg font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400">
                  {nextArticle.data.title}
                </span>
              </a>
            </div>
          )}
        </nav>
      )}
    </Container>
  </article>
</Layout>

